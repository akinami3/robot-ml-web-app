# =============================================================================
# Robot AI Web Application - Environment Variables
# =============================================================================
# Copy this file to .env and update values as needed
# cp .env.example .env

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
COMPOSE_PROJECT_NAME=robot-ai-webapp
ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Frontend
# -----------------------------------------------------------------------------
FRONTEND_PORT=3000
VITE_API_BASE_URL=http://localhost:8000/api/v1
VITE_WS_URL=ws://localhost:8080/ws

# -----------------------------------------------------------------------------
# Backend (FastAPI)
# -----------------------------------------------------------------------------
BACKEND_PORT=8000
BACKEND_HOST=0.0.0.0
BACKEND_WORKERS=1
BACKEND_LOG_LEVEL=debug
SECRET_KEY=change-this-to-a-secure-random-string-in-production
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# RSA Keys for JWT (generate with: openssl genrsa -out private.pem 2048 && openssl rsa -in private.pem -pubout -out public.pem)
JWT_PRIVATE_KEY_PATH=/app/keys/private.pem
JWT_PUBLIC_KEY_PATH=/app/keys/public.pem

# First admin user (created on initial startup)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=changeme123

# -----------------------------------------------------------------------------
# Gateway (Go)
# -----------------------------------------------------------------------------
GATEWAY_PORT=8080
GATEWAY_GRPC_PORT=50051
GATEWAY_LOG_LEVEL=debug

# Safety Parameters
GATEWAY_ESTOP_ENABLED=true
GATEWAY_CMD_TIMEOUT_SEC=3
GATEWAY_MAX_LINEAR_VEL=1.0
GATEWAY_MAX_ANGULAR_VEL=2.0
GATEWAY_OPERATION_LOCK_TIMEOUT_SEC=300

# -----------------------------------------------------------------------------
# PostgreSQL (TimescaleDB + pgvector)
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=robot_app
POSTGRES_PASSWORD=robot_app_password_change_me
POSTGRES_DB=robot_ai_db

# TimescaleDB settings
TIMESCALEDB_CHUNK_INTERVAL=1h
TIMESCALEDB_COMPRESSION_AFTER=7d
TIMESCALEDB_RETENTION_SENSOR_DAYS=90
TIMESCALEDB_RETENTION_COMMAND_DAYS=180

# Database URL (constructed from above)
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_password_change_me
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0

# -----------------------------------------------------------------------------
# Ollama (Local LLM)
# -----------------------------------------------------------------------------
OLLAMA_HOST=ollama
OLLAMA_PORT=11434
OLLAMA_BASE_URL=http://${OLLAMA_HOST}:${OLLAMA_PORT}
OLLAMA_MODEL=llama3
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# RAG settings
RAG_CHUNK_SIZE=500
RAG_CHUNK_OVERLAP=100
RAG_TOP_K=5

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
RATE_LIMIT_PER_MINUTE=60

# -----------------------------------------------------------------------------
# Backup
# -----------------------------------------------------------------------------
BACKUP_DIR=/backups
BACKUP_RETENTION_DAYS=30
